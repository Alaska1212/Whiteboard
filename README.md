# Whiteboard (Біла Дошка)
## Постановка задачі 
Метою цього проекту є створення спільної онлайн-дошки для малювання, що дозволяє кільком користувачам одночасно малювати на одній сцені в реальному часі. Користувачі повинні мати можливість малювати на дошці, зберігати свої малюнки та взаємодіяти з іншими користувачами через сервер для реального часу.
## Чому обрано JavaFX?

Технологічний стек проєкту базується на JavaFX через ідеальне співвідношення продуктивності та зручності розробки графічних редакторів:

1.  **Canvas API:**
    Використання класу `javafx.scene.canvas.Canvas` дозволяє реалізувати малювання з апаратним прискоренням, що забезпечує плавність ліній та відсутність затримок.

2.  **Інтерактивність:**
    Потужна система обробки подій (`MousePressed`, `MouseDragged`) спрощує реалізацію логіки малювання та маніпуляцій з об'єктами (текстом, зображеннями).

3.  **Багатий UI:**
    Наявність готових компонентів (`ColorPicker`, `Slider`, `FileChooser`) дозволила зосередитися на логіці програми, а не на створенні базових елементів інтерфейсу.

4.  **Кросплатформеність:**
    Принцип "Write once, run anywhere" дозволяє запускати графічний редактор на будь-якій популярній ОС (Windows, macOS, Linux).

    ### Використані пакети JavaFX

| Пакет | Ключові класи | Призначення у проєкті |
| :--- | :--- | :--- |
| **`javafx.stage`** | `Stage`, `FileChooser` | Управління головним вікном та діалогами збереження файлів. |
| **`javafx.scene`** | `Scene` | Головний контейнер для розміщення всіх елементів інтерфейсу. |
| **`javafx.scene.canvas`** | `Canvas` | Область для безпосереднього малювання ліній та фігур. |
| **`javafx.scene.control`** | `Button`, `ColorPicker`, `Slider` | Інтерактивні елементи керування (панель інструментів). |
| **`javafx.scene.image`** | `Image`, `WritableImage` | Робота із завантаженням зображень та буферизацією для експорту. |
| **`javafx.embed.swing`** | `SwingFXUtils` | Конвертація зображень між форматами JavaFX та Swing для збереження у файл. |

## Структура проєкту

```text
src/
├── Main.java               # точка входу додатку. Ініціалізація інтерфейсу, інструментів та обробка подій.
├── TextTool.java           # інструмент для роботи з текстом: додавання, переміщення та перемикання режимів.
├── ImageTool.java          # інструмент для роботи з зображеннями: імпорт, додавання та перемикання режимів.
├── WhiteboardCanvas.java   # полотно для малювання: малювання ліній, налаштування пензля, керування станом.
├── WhiteboardManager.java  # керування об'єктами (Model): збереження історії, логіка перемальовування та Drag&Drop.
└── FileManager.java        # керування файлами: створення знімка полотна та збереження його на диск.
````

## Алгоритми та опис функцій

Нижче наведено детальний опис алгоритмів роботи та ключових методів для кожного класу системи.

### 1. `Main.java`

#### Алгоритм роботи
1.  **Ініціалізація інтерфейсу:** У основному методі `start(Stage primaryStage)` створюються всі елементи UI: полотно, кнопки інструментів (текст, зображення), кнопки керування (збереження, очищення).
2.  **Створення інструментів:** Ініціалізуються об'єкти-контролери: `WhiteboardCanvas`, `TextTool`, `ImageTool`, `FileManager`.
3.  **Обробка подій:** Для кожної кнопки встановлюються слухачі (Listeners). Наприклад, кнопка "Очистити" викликає метод очищення полотна.
4.  **Запуск:** Виклик методу `launch()` ініціює життєвий цикл JavaFX та відкриває вікно.

#### Опис функцій
* `start(Stage primaryStage)` — Ініціалізує UI, додає елементи на сцену та налаштовує Layout.
* `initializeTools()` — Створює екземпляри інструментів для малювання, тексту та збереження.
* `addEventListeners()` — Прив'язує логіку до кнопок інтерфейсу.
* `launchApp()` — Статичний метод для запуску JavaFX додатку.

---

### 2. `TextTool.java`

####  Алгоритм роботи
1.  **Активація:** При натисканні кнопки "Текст" викликається `activateTextMode()`.
2.  **Додавання:** Клік по полотну тригерить `addText(x, y)`, вставляючи напис у координати кліку.
3.  **Переміщення:** Метод `moveText()` змінює координати існуючого тексту при перетягуванні мишею.
4.  **Перемикання:** Метод `toggleMode()` керує станом (активний інструмент чи ні).

####  Опис функцій
* `activateTextMode()` — Активує стан для введення тексту.
* `addText(double x, double y)` — Створює новий текстовий об'єкт у вказаних координатах.
* `moveText(Text text, double newX, double newY)` — Оновлює позицію тексту на полотні.
* `toggleMode()` — Перемикач між режимом малювання та редагування тексту.

---

### 3. `ImageTool.java`

####  Алгоритм роботи
1.  **Імпорт:** При активації відкривається діалог вибору файлу через `importImage()`.
2.  **Розміщення:** Після вибору файлу метод `addImageToCanvas()` додає зображення на полотно.
3.  **Керування режимом:** `toggleImageMode()` відповідає за перехід між малюванням та маніпуляцією картинками.

####  Опис функцій
* `importImage()` — Відкриває системний `FileChooser` для вибору файлу.
* `addImageToCanvas(Image image, double x, double y)` — Відображає завантажене зображення на полотні.
* `toggleImageMode()` — Вмикає/вимикає режим роботи із зображеннями.

---

### 4. `WhiteboardCanvas.java`

####  Алгоритм роботи
1.  **Малювання:** Використовує події `setOnMousePressed` (старт) та `setOnMouseDragged` (процес) для відстеження руху курсора.
2.  **Візуалізація:** Метод `drawLine()` з'єднує точки руху миші лініями.
3.  **Налаштування:** Методи `setBrushColor()` та `setBrushSize()` оновлюють параметри графічного контексту.
4.  **Стан:** `toggleDrawMode()` дозволяє тимчасово вимкнути малювання (наприклад, коли додаємо текст).

####  Опис функцій
* `setOnMousePressed()` — Фіксує початок малювання.
* `setOnMouseDragged()` — Малює лінію слідом за курсором.
* `drawLine(double startX, double startY, double endX, double endY)` — Рендеринг лінії між двома точками.
* `setBrushColor(Color color)` — Встановлює колір пензля.
* `setBrushSize(double size)` — Встановлює товщину лінії.
* `toggleDrawMode()` — Керує доступністю малювання.

---

### 5. `WhiteboardManager.java`

####  Алгоритм роботи
1.  **Зберігання:** Всі елементи (лінії, текст, картинки) додаються до списків через `addDrawingObject()`.
2.  **Рендеринг:** При будь-якій зміні викликається `redraw()`, який очищає полотно і малює всі об'єкти заново.
3.  **Маніпуляція:** Метод `moveObject()` оновлює координати об'єкта в історії та викликає перемальовування.

####  Опис функцій
* `addDrawingObject(Object obj)` — Додає новий елемент у список історії.
* `redraw()` — Повне оновлення полотна (очищення + малювання всіх об'єктів).
* `moveObject(Object obj, double newX, double newY)` — Змінює координати конкретного елемента.

---

### 6. `FileManager.java`

####  Алгоритм роботи
1.  **Ініціація:** Користувач натискає "Зберегти", викликаючи `saveCanvasAsImage()`.
2.  **Вибір шляху:** Відкривається `showSaveDialog()` для вибору папки та імені файлу.
3.  **Запис:** `ImageIO.write()` конвертує знімок полотна у PNG-файл на диску.
4.  **Безпека:** Блоки `try-catch` перехоплюють можливі помилки введення-виведення (IO Error).

####  Опис функцій
* `saveCanvasAsImage(Canvas canvas, File file)` — Робить snapshot полотна і зберігає його.
* `showSaveDialog()` — Відкриває вікно провідника для збереження.
* `ImageIO.write()` — Записує бінарні дані зображення у файл.
* `try-catch` — Механізм обробки виключень при роботі з файловою системою.
